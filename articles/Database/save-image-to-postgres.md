title: ä¿å­˜å›¾ç‰‡åˆ°æ•°æ®åº“ Postgres
date: 2020-02-02 18:54:02
---

åœ¨å¼€å‘å·¥ä½œä¸­ï¼Œä¿å­˜ä»å®¢æˆ·ç«¯ä¸Šä¼ è€Œæ¥çš„å›¾ç‰‡è¿™ç§éœ€æ±‚ååˆ†å¸¸è§ã€‚

**è€Œä¼—æ‰€å‘¨çŸ¥ï¼Œä¿å­˜å›¾ç‰‡æˆ–è€…å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸€ç§ååˆ†ä¸æ¨èçš„åšæ³•ï¼Œä¸»è¦åŸå› æ˜¯IOçš„æ•ˆç‡ï¼Œè¿˜æœ‰ä¼šå¢å¤§å®è´µæ•°æ®åº“èµ„æºçš„æ¶ˆè€—**

**ä½†æ˜¯**ï¼Œåœ¨ Github æœ‰å¾ˆå¤šè‡ªç”±çš„è½¯ä»¶ï¼Œåœ¨å¤„ç†å›¾ç‰‡æˆ–ä¸€äº›æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œå¾ˆå¤§éƒ¨åˆ†éƒ½ä¼šç›´æ¥ä¿å­˜åœ¨æ•°æ®åº“ï¼Œä¸€æ–¹é¢è¿™äº›å¼€æºè½¯ä»¶æ ¹æœ¬ä¸è€ƒè™‘é«˜å¹¶å‘çš„ä½¿ç”¨åœºæ™¯ï¼Œå¦ä¸€æ–¹é¢ä¸ºäº†éƒ¨ç½²çš„ç®€å•ã€‚

> å¾ˆå¤šå¼€æºçš„è½¯ä»¶è·Ÿä¼ä¸šé‡Œå¼€å‘çš„è½¯ä»¶æœ‰ä¸€ç‚¹å¾ˆå¤§ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œåœ¨ä¼ä¸šä¸­å¼€å‘ä¸€ä¸ªè½¯ä»¶ï¼Œé€šå¸¸ä¸€äº›é…ç½®ä¿¡æ¯éƒ½ä¼šæ£€å…¥ä»£ç ç®¡ç†ç³»ç»Ÿï¼Œä¾‹å¦‚é€šå¸¸æœ‰ `application-dev.yaml`ï¼Œ`config.ini` è¿™æ ·ä¸œè¥¿ï¼Œè¿™äº›ä»£ç åº“éƒ½æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥ä¹Ÿå¾ˆå®‰å…¨ï¼Œå¦‚æœå®¡æŸ¥æœºåˆ¶ä¸ä¸¥æ ¼ï¼Œç”šè‡³ä¼šåœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¾ˆå¤šç¯å¢ƒçš„ä¿¡æ¯ï¼Œä½†æ˜¯å¼€æºè½¯ä»¶ä¸ä¸€æ ·ï¼Œä¸ºäº†åœ¨å‰æœŸè·å¾—æ›´é«˜çš„äººæ°”ï¼Œè½¯ä»¶çš„éƒ¨ç½²æˆ–ä½¿ç”¨ä¼šå°½å¯èƒ½ç®€å•ï¼›åœ¨æœåŠ¡æ–¹é¢ï¼Œæˆ–è®¸å¼€å‘ä¼ä¸šåº”ç”¨ä¼šéšæ„ä½¿ç”¨ä¸€ä¸ª redis æœåŠ¡ï¼Œä½†æ˜¯åœ¨å¼€æºè½¯ä»¶ä¸­ï¼Œè¿™ä»¥ä¸ºä½¿ç”¨è€…è¦éƒ¨ç½²ä¸€ä¸ª Redisï¼Œè¿™æ— ç–‘ä¼šåŠ å¤§äº†éƒ¨ç½²çš„éš¾åº¦å’Œæ—¶é—´ã€‚

## å­˜å‚¨å›¾ç‰‡

ä¾‹å¦‚ç¬”è€…æ›¾ç»åšè¿‡ä¸€ä¸ªéœ€æ±‚ï¼Œè¦æ±‚è·å–ç½‘ç«™çš„ favicon ä¿å­˜èµ·æ¥ï¼Œå½“æ—¶å¹¶æ²¡æœ‰ä»»ä½•åŸºç¡€è®¾æ–½ï¼Œç›´æ¥ä¿å­˜åœ¨ç¡¬ç›˜è¦è€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œè€Œä½¿ç”¨æˆ–æ­å»ºä¸€ä¸ªåƒ s3 ä¸€æ ·çš„å­˜å‚¨æœåŠ¡åˆæ¥ä¸åŠï¼Œæ‰€ä»¥è€ƒè™‘å†ä¸‰ï¼Œè¿˜æ˜¯ç´¢æ€§ä¿å­˜åœ¨æ•°æ®åº“å§ï¼Œå› ä¸º favicon æœ¬èº«ä¹Ÿä¸å¤§ï¼Œæ™®ééƒ½æ˜¯ 32x32 çš„ä½å›¾ã€‚

``` typescript
const domain = `www.google.com`;
axios.get(`https://www.google.com/s2/favicons?domain=${domain}`, {
    responseType: 'arraybuffer'
  }).then(r => r.data);
```


> ### ArrayBuffer
> è¿™æ®µä»£ç ä½¿ç”¨çš„ typescriptï¼Œä½¿ç”¨ axios è·å–å›¾ç‰‡çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œ array buffer ä»£è¡¨å†…å­˜ä¹‹ä¸­çš„ä¸€æ®µäºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥é€šè¿‡â€œè§†å›¾â€è¿›è¡Œæ“ä½œã€‚â€œè§†å›¾â€éƒ¨ç½²äº†æ•°ç»„æ¥å£ï¼Œè¿™æ„å‘³ç€ï¼Œå¯ä»¥ç”¨æ•°ç»„çš„æ–¹æ³•æ“ä½œå†…å­˜ã€‚
> [https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)

ç„¶åç›´æ¥ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œ pg çš„å­—æ®µç±»å‹æˆ‘ä»¬é€‰æ‹©äº† `bytea`

```
favicon bytea
```



